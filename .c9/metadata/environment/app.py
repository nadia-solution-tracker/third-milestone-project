{"filter":false,"title":"app.py","tooltip":"/app.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":125,"column":0},"end":{"row":137,"column":57},"action":"remove","lines":["    # Create an empty list a the top function, so that this list can be","    # accessed from all potential clauses","    results = []","","    # Set up potential filters as empty variables, so that they are","    # accessible from all potential clauses","    cuisine_filter = {\"cuisine_name\": \"\"}","    allergen_filter = {\"allergen_name\": \"\"}","    meal_filter = {\"meal_type\": \"\"}","    search_item_filter = { \"$text\": { \"$search\": \"\" } }","","    # Check to see if there are any filters present in the request and assign","    # them to the variables initialised above, if present"],"id":1481},{"start":{"row":124,"column":21},"end":{"row":125,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":126,"column":4},"end":{"row":130,"column":4},"action":"remove","lines":["cuisine_filter[\"cusine_name\"] = request.form.get(\"cuisine_name_filter\")","    allergen_filter[\"allergen_name\"] = = request.form.get(\"allergen_name_filter\")","    meal_filter[\"meal_type\"] = request.form.get(\"meal_type_filter\")","    search_item_filter[\"$text\"][\"$search\"] = request.form.get('search_item')","    "],"id":1482}],[{"start":{"row":126,"column":4},"end":{"row":130,"column":0},"action":"insert","lines":["        cuisine=request.form.get(\"cuisine_name_filter\")","        allergen=request.form.get(\"allergen_name_filter\")","        meal=request.form.get(\"meal_type_filter\")","        search_item=request.form.get('search_item')",""],"id":1483}],[{"start":{"row":126,"column":8},"end":{"row":126,"column":12},"action":"remove","lines":["    "],"id":1484}],[{"start":{"row":129,"column":51},"end":{"row":130,"column":0},"action":"insert","lines":["",""],"id":1485},{"start":{"row":130,"column":0},"end":{"row":130,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":130,"column":4},"end":{"row":130,"column":8},"action":"remove","lines":["    "],"id":1486}],[{"start":{"row":130,"column":4},"end":{"row":131,"column":0},"action":"insert","lines":["",""],"id":1487},{"start":{"row":131,"column":0},"end":{"row":131,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":131,"column":4},"end":{"row":131,"column":8},"action":"insert","lines":["    "],"id":1488}],[{"start":{"row":131,"column":8},"end":{"row":131,"column":9},"action":"insert","lines":["r"],"id":1489},{"start":{"row":131,"column":9},"end":{"row":131,"column":10},"action":"insert","lines":["e"]},{"start":{"row":131,"column":10},"end":{"row":131,"column":11},"action":"insert","lines":["s"]},{"start":{"row":131,"column":11},"end":{"row":131,"column":12},"action":"insert","lines":["u"]},{"start":{"row":131,"column":12},"end":{"row":131,"column":13},"action":"insert","lines":["l"]},{"start":{"row":131,"column":13},"end":{"row":131,"column":14},"action":"insert","lines":["t"]},{"start":{"row":131,"column":14},"end":{"row":131,"column":15},"action":"insert","lines":["s"]}],[{"start":{"row":131,"column":15},"end":{"row":131,"column":17},"action":"insert","lines":["[]"],"id":1490}],[{"start":{"row":131,"column":16},"end":{"row":131,"column":17},"action":"remove","lines":["]"],"id":1491},{"start":{"row":131,"column":15},"end":{"row":131,"column":16},"action":"remove","lines":["["]}],[{"start":{"row":131,"column":15},"end":{"row":131,"column":16},"action":"insert","lines":["="],"id":1492}],[{"start":{"row":131,"column":16},"end":{"row":131,"column":18},"action":"insert","lines":["[]"],"id":1493}],[{"start":{"row":131,"column":18},"end":{"row":132,"column":0},"action":"insert","lines":["",""],"id":1494},{"start":{"row":132,"column":0},"end":{"row":132,"column":8},"action":"insert","lines":["        "]},{"start":{"row":132,"column":8},"end":{"row":133,"column":0},"action":"insert","lines":["",""]},{"start":{"row":133,"column":0},"end":{"row":133,"column":8},"action":"insert","lines":["        "]},{"start":{"row":133,"column":8},"end":{"row":133,"column":9},"action":"insert","lines":["i"]},{"start":{"row":133,"column":9},"end":{"row":133,"column":10},"action":"insert","lines":["f"]}],[{"start":{"row":133,"column":10},"end":{"row":133,"column":11},"action":"insert","lines":[" "],"id":1495},{"start":{"row":133,"column":11},"end":{"row":133,"column":12},"action":"insert","lines":["c"]},{"start":{"row":133,"column":12},"end":{"row":133,"column":13},"action":"insert","lines":["u"]},{"start":{"row":133,"column":13},"end":{"row":133,"column":14},"action":"insert","lines":["i"]},{"start":{"row":133,"column":14},"end":{"row":133,"column":15},"action":"insert","lines":["s"]},{"start":{"row":133,"column":15},"end":{"row":133,"column":16},"action":"insert","lines":["i"]}],[{"start":{"row":133,"column":16},"end":{"row":133,"column":17},"action":"insert","lines":["n"],"id":1496},{"start":{"row":133,"column":17},"end":{"row":133,"column":18},"action":"insert","lines":["e"]}],[{"start":{"row":133,"column":18},"end":{"row":133,"column":19},"action":"insert","lines":[" "],"id":1497},{"start":{"row":133,"column":19},"end":{"row":133,"column":20},"action":"insert","lines":["!"]},{"start":{"row":133,"column":20},"end":{"row":133,"column":21},"action":"insert","lines":["="]}],[{"start":{"row":133,"column":21},"end":{"row":133,"column":23},"action":"insert","lines":["\"\""],"id":1498}],[{"start":{"row":133,"column":22},"end":{"row":134,"column":0},"action":"insert","lines":["",""],"id":1499},{"start":{"row":134,"column":0},"end":{"row":134,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":134,"column":8},"end":{"row":134,"column":12},"action":"insert","lines":["    "],"id":1500}],[{"start":{"row":133,"column":22},"end":{"row":133,"column":24},"action":"insert","lines":["\"\""],"id":1501}],[{"start":{"row":133,"column":23},"end":{"row":133,"column":24},"action":"remove","lines":["\""],"id":1502}],[{"start":{"row":133,"column":23},"end":{"row":134,"column":0},"action":"insert","lines":["",""],"id":1503},{"start":{"row":134,"column":0},"end":{"row":134,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":134,"column":8},"end":{"row":134,"column":12},"action":"insert","lines":["    "],"id":1504}],[{"start":{"row":135,"column":12},"end":{"row":135,"column":13},"action":"remove","lines":["\""],"id":1505}],[{"start":{"row":131,"column":18},"end":{"row":132,"column":0},"action":"insert","lines":["",""],"id":1506},{"start":{"row":132,"column":0},"end":{"row":132,"column":8},"action":"insert","lines":["        "]},{"start":{"row":132,"column":8},"end":{"row":132,"column":9},"action":"insert","lines":["s"]},{"start":{"row":132,"column":9},"end":{"row":132,"column":10},"action":"insert","lines":["t"]},{"start":{"row":132,"column":10},"end":{"row":132,"column":11},"action":"insert","lines":["a"]},{"start":{"row":132,"column":11},"end":{"row":132,"column":12},"action":"insert","lines":["t"]},{"start":{"row":132,"column":12},"end":{"row":132,"column":13},"action":"insert","lines":["m"]},{"start":{"row":132,"column":13},"end":{"row":132,"column":14},"action":"insert","lines":["e"]},{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"insert","lines":["n"]},{"start":{"row":132,"column":15},"end":{"row":132,"column":16},"action":"insert","lines":["t"]}],[{"start":{"row":132,"column":15},"end":{"row":132,"column":16},"action":"remove","lines":["t"],"id":1507},{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"remove","lines":["n"]}],[{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"insert","lines":["n"],"id":1508},{"start":{"row":132,"column":15},"end":{"row":132,"column":16},"action":"insert","lines":["t"]},{"start":{"row":132,"column":16},"end":{"row":132,"column":17},"action":"insert","lines":["="]}],[{"start":{"row":132,"column":16},"end":{"row":132,"column":17},"action":"insert","lines":[" "],"id":1509}],[{"start":{"row":131,"column":15},"end":{"row":131,"column":16},"action":"insert","lines":[" "],"id":1510}],[{"start":{"row":131,"column":17},"end":{"row":131,"column":18},"action":"insert","lines":[" "],"id":1511}],[{"start":{"row":132,"column":18},"end":{"row":132,"column":19},"action":"insert","lines":[" "],"id":1512}],[{"start":{"row":132,"column":19},"end":{"row":132,"column":21},"action":"insert","lines":["\"\""],"id":1513}],[{"start":{"row":134,"column":23},"end":{"row":135,"column":0},"action":"insert","lines":["",""],"id":1514},{"start":{"row":135,"column":0},"end":{"row":135,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":135,"column":8},"end":{"row":135,"column":12},"action":"insert","lines":["    "],"id":1515}],[{"start":{"row":135,"column":12},"end":{"row":135,"column":13},"action":"insert","lines":["s"],"id":1516},{"start":{"row":135,"column":13},"end":{"row":135,"column":14},"action":"insert","lines":["t"]},{"start":{"row":135,"column":14},"end":{"row":135,"column":15},"action":"insert","lines":["a"]},{"start":{"row":135,"column":15},"end":{"row":135,"column":16},"action":"insert","lines":["t"]},{"start":{"row":135,"column":16},"end":{"row":135,"column":17},"action":"insert","lines":[","]},{"start":{"row":135,"column":17},"end":{"row":135,"column":18},"action":"insert","lines":["e"]},{"start":{"row":135,"column":18},"end":{"row":135,"column":19},"action":"insert","lines":["m"]},{"start":{"row":135,"column":19},"end":{"row":135,"column":20},"action":"insert","lines":["t"]}],[{"start":{"row":135,"column":19},"end":{"row":135,"column":20},"action":"remove","lines":["t"],"id":1517},{"start":{"row":135,"column":18},"end":{"row":135,"column":19},"action":"remove","lines":["m"]},{"start":{"row":135,"column":17},"end":{"row":135,"column":18},"action":"remove","lines":["e"]},{"start":{"row":135,"column":16},"end":{"row":135,"column":17},"action":"remove","lines":[","]}],[{"start":{"row":135,"column":16},"end":{"row":135,"column":17},"action":"insert","lines":["e"],"id":1518},{"start":{"row":135,"column":17},"end":{"row":135,"column":18},"action":"insert","lines":["m"]},{"start":{"row":135,"column":18},"end":{"row":135,"column":19},"action":"insert","lines":["n"]},{"start":{"row":135,"column":19},"end":{"row":135,"column":20},"action":"insert","lines":["t"]}],[{"start":{"row":135,"column":19},"end":{"row":135,"column":20},"action":"remove","lines":["t"],"id":1519},{"start":{"row":135,"column":18},"end":{"row":135,"column":19},"action":"remove","lines":["n"]}],[{"start":{"row":135,"column":18},"end":{"row":135,"column":19},"action":"insert","lines":["e"],"id":1520},{"start":{"row":135,"column":19},"end":{"row":135,"column":20},"action":"insert","lines":["n"]},{"start":{"row":135,"column":20},"end":{"row":135,"column":21},"action":"insert","lines":["t"]}],[{"start":{"row":135,"column":21},"end":{"row":135,"column":22},"action":"insert","lines":["+"],"id":1521},{"start":{"row":135,"column":22},"end":{"row":135,"column":23},"action":"insert","lines":["="]}],[{"start":{"row":135,"column":23},"end":{"row":135,"column":70},"action":"insert","lines":["mongo.db.recipes.find({\"cuisine_name\":cuisine})"],"id":1522}],[{"start":{"row":134,"column":23},"end":{"row":134,"column":24},"action":"insert","lines":[":"],"id":1523}],[{"start":{"row":132,"column":12},"end":{"row":132,"column":13},"action":"insert","lines":["e"],"id":1524}],[{"start":{"row":137,"column":12},"end":{"row":138,"column":0},"action":"remove","lines":["",""],"id":1525}],[{"start":{"row":136,"column":12},"end":{"row":136,"column":13},"action":"insert","lines":["r"],"id":1526},{"start":{"row":136,"column":13},"end":{"row":136,"column":14},"action":"insert","lines":["e"]},{"start":{"row":136,"column":14},"end":{"row":136,"column":15},"action":"insert","lines":["s"]},{"start":{"row":136,"column":15},"end":{"row":136,"column":16},"action":"insert","lines":["u"]},{"start":{"row":136,"column":16},"end":{"row":136,"column":17},"action":"insert","lines":["l"]},{"start":{"row":136,"column":17},"end":{"row":136,"column":18},"action":"insert","lines":["t"]}],[{"start":{"row":136,"column":18},"end":{"row":136,"column":19},"action":"insert","lines":["="],"id":1527}],[{"start":{"row":136,"column":19},"end":{"row":136,"column":21},"action":"insert","lines":["[]"],"id":1528}],[{"start":{"row":136,"column":20},"end":{"row":136,"column":21},"action":"insert","lines":["c"],"id":1529},{"start":{"row":136,"column":21},"end":{"row":136,"column":22},"action":"insert","lines":["i"]},{"start":{"row":136,"column":22},"end":{"row":136,"column":23},"action":"insert","lines":["s"]}],[{"start":{"row":136,"column":22},"end":{"row":136,"column":23},"action":"remove","lines":["s"],"id":1530},{"start":{"row":136,"column":21},"end":{"row":136,"column":22},"action":"remove","lines":["i"]}],[{"start":{"row":136,"column":21},"end":{"row":136,"column":22},"action":"insert","lines":["u"],"id":1531},{"start":{"row":136,"column":22},"end":{"row":136,"column":23},"action":"insert","lines":["i"]},{"start":{"row":136,"column":23},"end":{"row":136,"column":24},"action":"insert","lines":["s"]},{"start":{"row":136,"column":24},"end":{"row":136,"column":25},"action":"insert","lines":["i"]},{"start":{"row":136,"column":25},"end":{"row":136,"column":26},"action":"insert","lines":["n"]},{"start":{"row":136,"column":26},"end":{"row":136,"column":27},"action":"insert","lines":["e"]}],[{"start":{"row":136,"column":28},"end":{"row":137,"column":0},"action":"insert","lines":["",""],"id":1532},{"start":{"row":137,"column":0},"end":{"row":137,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":137,"column":8},"end":{"row":137,"column":12},"action":"remove","lines":["    "],"id":1533}],[{"start":{"row":137,"column":8},"end":{"row":137,"column":9},"action":"insert","lines":["e"],"id":1534},{"start":{"row":137,"column":9},"end":{"row":137,"column":10},"action":"insert","lines":["l"]},{"start":{"row":137,"column":10},"end":{"row":137,"column":11},"action":"insert","lines":["s"]},{"start":{"row":137,"column":11},"end":{"row":137,"column":12},"action":"insert","lines":["e"]}],[{"start":{"row":137,"column":12},"end":{"row":138,"column":0},"action":"insert","lines":["",""],"id":1535},{"start":{"row":138,"column":0},"end":{"row":138,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":138,"column":8},"end":{"row":138,"column":12},"action":"insert","lines":["    "],"id":1536}],[{"start":{"row":137,"column":6},"end":{"row":137,"column":12},"action":"remove","lines":["  else"],"id":1537}],[{"start":{"row":137,"column":6},"end":{"row":137,"column":7},"action":"insert","lines":[" "],"id":1538},{"start":{"row":137,"column":7},"end":{"row":137,"column":8},"action":"insert","lines":["i"]}],[{"start":{"row":137,"column":7},"end":{"row":137,"column":8},"action":"remove","lines":["i"],"id":1539}],[{"start":{"row":137,"column":7},"end":{"row":137,"column":8},"action":"insert","lines":[" "],"id":1540}],[{"start":{"row":137,"column":8},"end":{"row":137,"column":9},"action":"insert","lines":["i"],"id":1541},{"start":{"row":137,"column":9},"end":{"row":137,"column":10},"action":"insert","lines":["f"]}],[{"start":{"row":137,"column":10},"end":{"row":137,"column":11},"action":"insert","lines":[" "],"id":1542}],[{"start":{"row":137,"column":8},"end":{"row":137,"column":11},"action":"remove","lines":["if "],"id":1543},{"start":{"row":137,"column":8},"end":{"row":139,"column":28},"action":"insert","lines":["if cuisine !=\"\":","            statement+=mongo.db.recipes.find({\"cuisine_name\":cuisine})","            result=[cuisine]"]}],[{"start":{"row":137,"column":11},"end":{"row":137,"column":18},"action":"remove","lines":["cuisine"],"id":1544},{"start":{"row":137,"column":11},"end":{"row":137,"column":12},"action":"insert","lines":["a"]},{"start":{"row":137,"column":12},"end":{"row":137,"column":13},"action":"insert","lines":["l"]},{"start":{"row":137,"column":13},"end":{"row":137,"column":14},"action":"insert","lines":["l"]},{"start":{"row":137,"column":14},"end":{"row":137,"column":15},"action":"insert","lines":["e"]},{"start":{"row":137,"column":15},"end":{"row":137,"column":16},"action":"insert","lines":["r"]},{"start":{"row":137,"column":16},"end":{"row":137,"column":17},"action":"insert","lines":["g"]},{"start":{"row":137,"column":17},"end":{"row":137,"column":18},"action":"insert","lines":["e"]},{"start":{"row":137,"column":18},"end":{"row":137,"column":19},"action":"insert","lines":["n"]}],[{"start":{"row":138,"column":23},"end":{"row":138,"column":45},"action":"remove","lines":["mongo.db.recipes.find("],"id":1545}],[{"start":{"row":138,"column":23},"end":{"row":138,"column":24},"action":"insert","lines":[" "],"id":1546}],[{"start":{"row":138,"column":24},"end":{"row":138,"column":25},"action":"remove","lines":["{"],"id":1547}],[{"start":{"row":135,"column":69},"end":{"row":135,"column":70},"action":"remove","lines":[")"],"id":1548}],[{"start":{"row":125,"column":4},"end":{"row":140,"column":12},"action":"remove","lines":["if request.method == \"POST\":","        cuisine=request.form.get(\"cuisine_name_filter\")","        allergen=request.form.get(\"allergen_name_filter\")","        meal=request.form.get(\"meal_type_filter\")","        search_item=request.form.get('search_item')","    ","        results = []","        statement = \"\"","        ","        if cuisine !=\"\":","            statement+=mongo.db.recipes.find({\"cuisine_name\":cuisine}","            result=[cuisine]","        if allergen !=\"\":","            statement+= \"cuisine_name\":cuisine})","            result=[cuisine]","            "],"id":1549},{"start":{"row":125,"column":4},"end":{"row":196,"column":0},"action":"insert","lines":["","if request.method=='POST':","        cuisine=request.form.get(\"cuisine_name_filter\")","        allergen=request.form.get(\"allergen_name_filter\")","        meal=request.form.get(\"meal_type_filter\")","        search_item=request.form.get('search_item')","        page, per_page, offset = get_page_args(page_parameter='page',","                                           per_page_parameter='per_page')","        total = mongo.db.recipes.count_documents({})","        recipes_fetched = mongo.db.recipes.find().skip((page - 1)*ITEMS_PER_PAGE).limit(ITEMS_PER_PAGE)","        pagination = Pagination(page=page,","                            per_page=ITEMS_PER_PAGE,","                            total=total,","                            record_name='Recipes',","                            format_total=True,","                            format_number=True,","                            css_framework='foundation')","        ","        query={}","        if cuisine:","            filter_cuisine_recipes=mongo.db.recipes.find({\"cuisine_name\":cuisine})","            page, per_page, offset = get_page_args(page_parameter='page',per_page_parameter='per_page')","            total_filter_recipes=filter_cuisine_recipes.count()","            cuisine_recipes_fetched= filter_cuisine_recipes.skip((page - 1)*ITEMS_PER_PAGE).limit(ITEMS_PER_PAGE)","            pagination = Pagination(page=page,per_page=ITEMS_PER_PAGE,total=total_filter_recipes,record_name='Recipes')","            return render_template('search.html',recipes=cuisine_recipes_fetched,query=cuisine,page=page,","                               per_page=per_page,","                               pagination=pagination)  ","                               ","        if allergen:","            filter_allergen_recipes=mongo.db.recipes.find({\"allergen_name\":allergen})","            page, per_page, offset = get_page_args(page_parameter='page',per_page_parameter='per_page')","            total_filter_recipes=filter_allergen_recipes.count()","            allergen_recipes_fetched= filter_allergen_recipes.skip((page - 1)*ITEMS_PER_PAGE).limit(ITEMS_PER_PAGE)","            pagination = Pagination(page=page,per_page=ITEMS_PER_PAGE,total=total_filter_recipes,record_name='Recipes')","            return render_template('search.html',recipes=allergen_recipes_fetched,query=allergen,page=page,","                               per_page=per_page,","                               pagination=pagination)  ","                               ","        if meal:","            filter_meal_recipes=mongo.db.recipes.find({\"meal_type\":meal})","            page, per_page, offset = get_page_args(page_parameter='page',per_page_parameter='per_page')","            total_filter_recipes=filter_meal_recipes.count()","            meal_recipes_fetched= filter_meal_recipes.skip((page - 1)*ITEMS_PER_PAGE).limit(ITEMS_PER_PAGE)","            pagination = Pagination(page=page,per_page=ITEMS_PER_PAGE,total=total_filter_recipes,record_name='Recipes')","            return render_template('search.html',recipes=meal_recipes_fetched,query=meal,page=page,","                               per_page=per_page,","                               pagination=pagination)  ","                               ","        else:","            #  create the index","            mongo.db.recipes.create_index( [(\"$**\", 'text')] )","            page, per_page, offset = get_page_args(page_parameter='page',per_page_parameter='per_page')","","             # search with the search term that came through the form","            cursor = mongo.db.recipes.find({ \"$text\": { \"$search\": search_item } })","            total_filter_recipes=cursor.count()","            pagination = Pagination(page=page,per_page=ITEMS_PER_PAGE,total=total_filter_recipes,record_name='Recipes')","            recipes = [recipe for recipe in cursor]","            ","            # send recipes to page","            return render_template('search.html', recipes=recipes, query=search_item,page=page,","                               per_page=per_page,","                               pagination=pagination)","            ","    return render_template('recipes.html',","                           recipes=recipes_fetched,cuisines=mongo.db.cuisines.find(),allergens=mongo.db.allergens.find(),","                           page=page,","                           per_page=per_page,","                           pagination=pagination)","                           ",""]}],[{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"insert","lines":["    "],"id":1550}],[{"start":{"row":248,"column":2},"end":{"row":249,"column":0},"action":"insert","lines":["",""],"id":1551},{"start":{"row":249,"column":0},"end":{"row":249,"column":2},"action":"insert","lines":["  "]},{"start":{"row":249,"column":2},"end":{"row":249,"column":3},"action":"insert","lines":["\\"]},{"start":{"row":249,"column":2},"end":{"row":249,"column":3},"action":"remove","lines":["\\"]},{"start":{"row":249,"column":1},"end":{"row":249,"column":2},"action":"remove","lines":[" "]},{"start":{"row":249,"column":0},"end":{"row":249,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":249,"column":0},"end":{"row":253,"column":0},"action":"insert","lines":["@app.route('/delete_recipe/<recipe_id>')","def delete_recipe(recipe_id):","    recipe=mongo.db.recipes.remove({\"_id\":ObjectId(recipe_id)})","    return redirect(url_for('get_recipes'))",""],"id":1552}],[{"start":{"row":253,"column":0},"end":{"row":254,"column":0},"action":"insert","lines":["",""],"id":1553}],[{"start":{"row":248,"column":2},"end":{"row":249,"column":0},"action":"remove","lines":["",""],"id":1554}],[{"start":{"row":248,"column":1},"end":{"row":248,"column":2},"action":"remove","lines":[" "],"id":1572},{"start":{"row":248,"column":0},"end":{"row":248,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":248,"column":0},"end":{"row":249,"column":0},"action":"insert","lines":["",""],"id":1573}],[{"start":{"row":202,"column":97},"end":{"row":203,"column":0},"action":"insert","lines":["",""],"id":1574},{"start":{"row":203,"column":0},"end":{"row":203,"column":4},"action":"insert","lines":["    "]},{"start":{"row":203,"column":4},"end":{"row":203,"column":5},"action":"insert","lines":["u"]},{"start":{"row":203,"column":5},"end":{"row":203,"column":6},"action":"insert","lines":["s"]},{"start":{"row":203,"column":6},"end":{"row":203,"column":7},"action":"insert","lines":["e"]},{"start":{"row":203,"column":7},"end":{"row":203,"column":8},"action":"insert","lines":["r"]}],[{"start":{"row":203,"column":0},"end":{"row":203,"column":8},"action":"remove","lines":["    user"],"id":1575},{"start":{"row":202,"column":97},"end":{"row":203,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":203,"column":58},"end":{"row":203,"column":59},"action":"insert","lines":[","],"id":1576}],[{"start":{"row":203,"column":59},"end":{"row":203,"column":88},"action":"insert","lines":["username=session['user_name']"],"id":1577}],[{"start":{"row":109,"column":16},"end":{"row":109,"column":17},"action":"remove","lines":["_"],"id":1578}],[{"start":{"row":109,"column":16},"end":{"row":109,"column":17},"action":"insert","lines":["_"],"id":1579}],[{"start":{"row":201,"column":27},"end":{"row":202,"column":0},"action":"insert","lines":["",""],"id":1580},{"start":{"row":202,"column":0},"end":{"row":202,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":202,"column":4},"end":{"row":203,"column":33},"action":"insert","lines":["if not 'user_name' in session:","        return redirect('/login')"],"id":1581}],[{"start":{"row":203,"column":7},"end":{"row":203,"column":33},"action":"remove","lines":[" return redirect('/login')"],"id":1582}],[{"start":{"row":203,"column":6},"end":{"row":203,"column":7},"action":"remove","lines":[" "],"id":1583},{"start":{"row":203,"column":5},"end":{"row":203,"column":6},"action":"remove","lines":[" "]},{"start":{"row":203,"column":4},"end":{"row":203,"column":5},"action":"remove","lines":[" "]},{"start":{"row":203,"column":0},"end":{"row":203,"column":4},"action":"remove","lines":["    "]},{"start":{"row":202,"column":34},"end":{"row":203,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":203,"column":0},"end":{"row":203,"column":4},"action":"insert","lines":["    "],"id":1584},{"start":{"row":204,"column":0},"end":{"row":204,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":204,"column":62},"end":{"row":204,"column":92},"action":"remove","lines":[",username=session['user_name']"],"id":1585}],[{"start":{"row":204,"column":63},"end":{"row":205,"column":0},"action":"insert","lines":["",""],"id":1586},{"start":{"row":205,"column":0},"end":{"row":205,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":205,"column":4},"end":{"row":205,"column":8},"action":"remove","lines":["    "],"id":1587}],[{"start":{"row":205,"column":4},"end":{"row":205,"column":5},"action":"insert","lines":["e"],"id":1588},{"start":{"row":205,"column":5},"end":{"row":205,"column":6},"action":"insert","lines":["l"]},{"start":{"row":205,"column":6},"end":{"row":205,"column":7},"action":"insert","lines":["s"]},{"start":{"row":205,"column":7},"end":{"row":205,"column":8},"action":"insert","lines":["e"]}],[{"start":{"row":205,"column":8},"end":{"row":205,"column":9},"action":"insert","lines":[":"],"id":1589}],[{"start":{"row":205,"column":9},"end":{"row":206,"column":0},"action":"insert","lines":["",""],"id":1590},{"start":{"row":206,"column":0},"end":{"row":206,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":203,"column":8},"end":{"row":203,"column":101},"action":"remove","lines":["recipe=mongo.db.recipes.find_one_and_update({'_id':ObjectId(recipe_id)},{'$inc':{'views':1}})"],"id":1591}],[{"start":{"row":201,"column":27},"end":{"row":202,"column":0},"action":"insert","lines":["",""],"id":1592},{"start":{"row":202,"column":0},"end":{"row":202,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":202,"column":4},"end":{"row":202,"column":97},"action":"insert","lines":["recipe=mongo.db.recipes.find_one_and_update({'_id':ObjectId(recipe_id)},{'$inc':{'views':1}})"],"id":1593}],[{"start":{"row":204,"column":4},"end":{"row":204,"column":8},"action":"remove","lines":["    "],"id":1594},{"start":{"row":204,"column":0},"end":{"row":204,"column":4},"action":"remove","lines":["    "]},{"start":{"row":203,"column":34},"end":{"row":204,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":206,"column":8},"end":{"row":206,"column":63},"action":"insert","lines":["return render_template('viewrecipe.html',recipe=recipe)"],"id":1595}],[{"start":{"row":206,"column":62},"end":{"row":206,"column":63},"action":"insert","lines":[","],"id":1596},{"start":{"row":206,"column":63},"end":{"row":206,"column":64},"action":"insert","lines":["u"]},{"start":{"row":206,"column":64},"end":{"row":206,"column":65},"action":"insert","lines":["s"]},{"start":{"row":206,"column":65},"end":{"row":206,"column":66},"action":"insert","lines":["e"]},{"start":{"row":206,"column":66},"end":{"row":206,"column":67},"action":"insert","lines":["r"]},{"start":{"row":206,"column":67},"end":{"row":206,"column":68},"action":"insert","lines":["n"]},{"start":{"row":206,"column":68},"end":{"row":206,"column":69},"action":"insert","lines":["m"]},{"start":{"row":206,"column":69},"end":{"row":206,"column":70},"action":"insert","lines":["a"]}],[{"start":{"row":206,"column":70},"end":{"row":206,"column":71},"action":"insert","lines":["e"],"id":1597}],[{"start":{"row":206,"column":63},"end":{"row":206,"column":71},"action":"remove","lines":["usernmae"],"id":1598},{"start":{"row":206,"column":63},"end":{"row":206,"column":92},"action":"insert","lines":["username=session['user_name']"]}]]},"ace":{"folds":[],"scrolltop":1307.15625,"scrollleft":0,"selection":{"start":{"row":199,"column":27},"end":{"row":199,"column":27},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":89,"state":"start","mode":"ace/mode/python"}},"timestamp":1564504641986,"hash":"c0b55d03bdae38e6762ba6e999a82e8bc0cc7ac3"}